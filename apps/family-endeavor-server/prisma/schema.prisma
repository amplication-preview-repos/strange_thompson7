datasource db {
  provider = "postgresql"
  url      = env("DB_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Endeavor {
  id                 String             @id @default(cuid())
  createdAt          DateTime           @default(now())
  updatedAt          DateTime           @updatedAt
  description        String?
  name               String?
  dueDate            DateTime?
  reward             Reward?            @relation(fields: [rewardId], references: [id])
  rewardId           String?
  assignedTo         String?
  endeavorProgresses EndeavorProgress[]
}

model Parent {
  id        String   @id @default(cuid())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  email     String?
  name      String?
  kids      Kid[]
  user      User?    @relation(fields: [userId], references: [id])
  userId    String?
}

model Kid {
  id                 String             @id @default(cuid())
  createdAt          DateTime           @default(now())
  updatedAt          DateTime           @updatedAt
  profilePicture     Json?
  name               String?
  yearOfBirth        Int?
  parent             Parent?            @relation(fields: [parentId], references: [id])
  parentId           String?
  gender             EnumKidGender?
  endeavorProgresses EndeavorProgress[]
  prizeProgresses    PrizeProgress[]
  user               User?              @relation(fields: [userId], references: [id])
  userId             String?
}

model Reward {
  id         String     @id @default(cuid())
  createdAt  DateTime   @default(now())
  updatedAt  DateTime   @updatedAt
  endeavors  Endeavor[]
  blueGems   Int?
  redGems    Int?
  purpleGems Int?
}

model Prize {
  id               String          @id @default(cuid())
  createdAt        DateTime        @default(now())
  updatedAt        DateTime        @updatedAt
  name             String?
  description      String?
  costInBlueGems   Int?
  costInPurpleGems Int?
  costInRedGems    Int?
  prizeProgresses  PrizeProgress[]
}

model PrizeProgress {
  id            String                   @id @default(cuid())
  createdAt     DateTime                 @default(now())
  updatedAt     DateTime                 @updatedAt
  datePurchased DateTime?
  kid           Kid?                     @relation(fields: [kidId], references: [id])
  kidId         String?
  prize         Prize?                   @relation(fields: [prizeId], references: [id])
  prizeId       String?
  status        EnumPrizeProgressStatus?
  dateRedeemed  DateTime?
}

model EndeavorProgress {
  id               String                      @id @default(cuid())
  createdAt        DateTime                    @default(now())
  updatedAt        DateTime                    @updatedAt
  status           EnumEndeavorProgressStatus?
  blueGemsEarned   Int?
  redGemsEarned    Int?
  purpleGemsEarned Int?
  kid              Kid?                        @relation(fields: [kidId], references: [id])
  kidId            String?
  endeavor         Endeavor?                   @relation(fields: [endeavorId], references: [id])
  endeavorId       String?
}

model User {
  id        String   @id @default(cuid())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  firstName String?
  lastName  String?
  username  String   @unique
  email     String?  @unique
  password  String
  roles     Json
  parents   Parent[]
  kids      Kid[]
}

enum EnumKidGender {
  Option1
}

enum EnumPrizeProgressStatus {
  Option1
}

enum EnumEndeavorProgressStatus {
  Option1
}
